<main class="container-fluid adjust-height-tight" [class.hide-under-menu]="mobileFiltersOpen" id="main-container" role="main" tabindex="0">
    <div class="row row--top">

        <!-- Page title section -->
        <section class="page-title-section col-lg-5 col-md-3 col-sm-4 col-xs-12">
            <h2 class="page-title mobile-only" >{{totalStoriesFound}}</h2>
            <p *ngIf="!showingStarredSet" class="welcome-paragraph" aria-hidden="true"><span class="">{{totalStoriesFound}}</span></p>
            <p *ngIf="showingStarredSet" class="welcome-paragraph" aria-hidden="true" [ngPlural]="playlist.length">
                <ng-template ngPluralCase="=0">{{playlist.length}} Stories in My Playlist</ng-template>
                <ng-template ngPluralCase="=1">{{playlist.length}} Story in My Playlist</ng-template>
                <ng-template ngPluralCase="other">{{playlist.length}} Stories in My Playlist</ng-template>
            </p>
            <button class="filters__button" (click)="toggleMobileFilters()" [disabled]="pages.length < 1">
                <svg class="filters__button-icon" width="24px" height="27px" viewBox="0 0 24 27" xmlns="http://www.w3.org/2000/svg">
                    <title>
                        Icon for Filter Button
                    </title>
                    <g fill-rule="nonzero" fill="#FFF">
                        <path d="M22.336422 12.623774h-1.868784c-.474612-1.956227-2.254407-3.453963-4.30117-3.453963-2.046764 0-3.796895 1.46717-4.30117 3.453964H1.09754C.474612 12.623774 0 13.11283 0 13.754717c0 .641887.474612 1.130943 1.09754 1.130943h10.79742c.474613 1.956227 2.254407 3.453963 4.271508 3.453963 2.0171 0 3.796895-1.46717 4.30117-3.453963h1.868784c.622928 0 1.09754-.489056 1.09754-1.130943 0-.641887-.504275-1.130943-1.09754-1.130943zm-6.169954 3.85132c-1.4535 0-2.64003-1.22264-2.64003-2.720377 0-1.497736 1.18653-2.720377 2.64003-2.720377 1.4535 0 2.640028 1.22264 2.640028 2.720377 0 1.497736-1.156866 2.720377-2.640028 2.720377zM1.096152 5.71585h1.9553c.47401 1.956225 2.251556 3.45396 4.295732 3.45396s3.792095-1.467168 4.295733-3.45396H22.33781c.62214 0 1.096152-.489058 1.096152-1.130944 0-.641887-.474012-1.130944-1.096152-1.130944H11.61329C11.13928 1.497736 9.361736 0 7.31756 0 5.273382 0 3.525463 1.436604 3.05145 3.453962H1.096153C.474012 3.453962 0 3.94302 0 4.584906 0 5.226792.503638 5.71585 1.096152 5.71585zm6.221406-3.851322c1.451662 0 2.63669 1.222642 2.63669 2.720378 0 1.497736-1.185028 2.720377-2.63669 2.720377-1.45166 0-2.63669-1.22264-2.63669-2.720377 0-1.497736 1.18503-2.720378 2.63669-2.720378zM22.33781 21.28415H11.642917c-.474012-1.956225-2.251557-3.45396-4.295733-3.45396S3.55509 19.297357 3.05145 21.28415H1.096153C.474012 21.28415 0 21.77321 0 22.415095c0 .641887.474012 1.130944 1.096152 1.130944h1.9553C3.52546 25.502264 5.303007 27 7.347183 27s3.792095-1.46717 4.295733-3.453962H22.33781c.62214 0 1.096152-.489057 1.096152-1.130944 0-.641886-.503637-1.130943-1.096152-1.130943zM7.347184 25.135473c-1.45166 0-2.63669-1.222642-2.63669-2.720378 0-1.497736 1.18503-2.720377 2.63669-2.720377 1.451662 0 2.63669 1.22264 2.63669 2.720377 0 1.497736-1.155403 2.720378-2.63669 2.720378z"/>
                    </g>
                </svg>
                <span>Filters</span>
            </button>
        </section>

        <!-- Mobile Filters -->
        <section class="filters filters--mobile" [class.filters--show]="mobileFiltersOpen">
            <header class="filters__header">
                <button class="filters__header-button" href="" (click)="clearFilters()">Reset</button>
                <h3 class="filters__header-title">Filter Results</h3>
                <button class="filters__header-button" href="" (click)="toggleMobileFilters()">Cancel</button>
            </header>

            <div class="filters__body">
                <section *ngIf="myCurrentStorySearchSorting >= 0" class="filters__section">
                    <h4 class="filters__section-title">Sort by</h4>
                    <div *ngFor="let oneSortField of storySearchSortFields;let i=index">
                        <div *ngIf="i % 2 == 0">
                            <div *ngIf="i < storySearchSortFields.length" class="filters__2-col">
                                <button class="filters__button" [class.selected]="storySearchSortFields[i].selected"
                                  (click)="setStorySearchSortingAndDoTheSort(storySearchSortFields[i].id)">{{storySearchSortFields[i].value}}
                                  </button>
                                <button *ngIf="i < storySearchSortFields.length - 1" class="filters__button" [class.selected]="storySearchSortFields[i+1].selected"
                                  (click)="setStorySearchSortingAndDoTheSort(storySearchSortFields[i+1].id)">{{storySearchSortFields[i+1].value}}
                                  </button>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="filters__section">
                    <h4 class="filters__section-title">View as</h4>
                    <div class="filters__2-col">
                        <button class="filters__button filters__button--inverted" (click)="cardView = true" [class.filters__button--inverted]="cardView">
                            <div class="filters__button-content">
                                <svg class="filters__button-icon" width="22px" height="22px" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
                                    <title>
                                        Grid icon
                                    </title>
                                    <path class="grid" d="M10 1v8c0 .28-.096667.516667-.289333.71C9.516667 9.903333 9.28 10 9 10H1c-.28 0-.516667-.096667-.71-.29C.096667 9.516667 0 9.28 0 9V1C0 .72.096667.483333.29.29.483333.097333.72 0 1 0h8c.28 0 .516667.097333.710667.29C9.903333.483333 10 .72 10 1c0 0 0-.28 0 0zm0 12v8c0 .28-.096667.516667-.289333.71C9.516667 21.903333 9.28 22 9 22H1c-.28 0-.516667-.096667-.71-.29C.096667 21.516667 0 21.28 0 21v-8c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h8c.28 0 .516667.097333.710667.29.192666.193333.289333.43.289333.71 0 0 0-.28 0 0zM22 1v8c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29h-8c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71V1c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h8c.28 0 .516667.097333.710667.29C21.903333.483333 22 .72 22 1c0 0 0-.28 0 0zm0 12v8c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29h-8c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71v-8c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h8c.28 0 .516667.097333.710667.29.192666.193333.289333.43.289333.71z" fill="currentColor" fill-rule="evenodd"/>
                                </svg>
                                <span>Grid</span>
                            </div>
                        </button>
                        <button class="filters__button" (click)="cardView = false" [class.filters__button--inverted]="!cardView">
                            <div class="filters__button-content">
                                <svg class="filters__button-icon" width="24px" height="22px" viewBox="0 0 24 22" xmlns="http://www.w3.org/2000/svg">
                                    <title>
                                        List icon
                                    </title>
                                    <path class="list" d="M6 1v4c0 .28-.096667.516667-.289333.71C5.516667 5.903333 5.28 6 5 6H1c-.28 0-.516667-.096667-.71-.29C.096667 5.516667 0 5.28 0 5V1C0 .72.096667.483333.29.29.483333.097333.72 0 1 0h4c.28 0 .516667.097333.710667.29C5.903333.483333 6 .72 6 1c0 0 0-.28 0 0zm0 12V9c0-.28-.096667-.516667-.289333-.71C5.516667 8.097333 5.28 8 5 8H1c-.28 0-.516667.097333-.71.29C.096667 8.483333 0 8.72 0 9v4c0 .28.096667.516667.29.71.193333.193333.43.29.71.29h4c.28 0 .516667-.096667.710667-.29C5.903333 13.516667 6 13.28 6 13c0 0 0 .28 0 0zm0 4v4c0 .28-.096667.516667-.289333.71C5.516667 21.903333 5.28 22 5 22H1c-.28 0-.516667-.096667-.71-.29C.096667 21.516667 0 21.28 0 21v-4c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h4c.28 0 .516667.097333.710667.29C5.903333 16.483333 6 16.72 6 17c0 0 0-.28 0 0zM24 1v4c0 .28-.096667.516667-.289333.71C23.516667 5.903333 23.28 6 23 6H9c-.28 0-.516667-.096667-.71-.29C8.096667 5.516667 8 5.28 8 5V1c0-.28.096667-.516667.29-.71C8.483333.097333 8.72 0 9 0h14c.28 0 .516667.097333.710667.29C23.903333.483333 24 .72 24 1c0 0 0-.28 0 0zm0 8v4c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29H9c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71V9c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h14c.28 0 .516667.097333.710667.29C23.903333 8.483333 24 8.72 24 9c0 0 0-.28 0 0zm0 8v4c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29H9c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71v-4c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h14c.28 0 .516667.097333.710667.29.192666.193333.289333.43.289333.71z" fill="currentColor" fill-rule="evenodd"/>
                                </svg>
                                <span>List</span>
                            </div>
                        </button>
                    </div>
                </section>

                <section class="filters__section">
                    <h4 class="filters__section-title">Stories per Page</h4>
                    <!-- People per page for current results -->
                    <div class="dropdown search__res-per-pg">
                        <button class="search__res-per-pg-button dropdown-toggle" type="button" id="desktop-pgSizeEntryEnd" data-toggle="dropdown">
                            <div class="search__res-per-pg-container">
                                <span>Showing {{myCurrentPageSize}} People per Page</span>
                                <span class="caret"></span>
                            </div>
                        </button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="desktop-pgSizeEntryEnd">
                            <li role="presentation"><a class="dropdown__option" role="menuitem" (click)="setPageSize(10)">10</a></li>
                            <li role="presentation"><a class="dropdown__option" role="menuitem" (click)="setPageSize(30)">30</a></li>
                            <li role="presentation"><a class="dropdown__option" role="menuitem" (click)="setPageSize(60)">60</a></li>
                            <li role="presentation"><a class="dropdown__option" role="menuitem" (click)="setPageSize(100)">100</a></li>
                            <li role="presentation"><a class="dropdown__option" role="menuitem" (click)="setPageSize(300)">300</a></li>
                        </ul>
                    </div>
                </section>

                <div class="filters__applied" *ngIf="activeJobFacets.length > 0 || activeGenderFacets.length > 0 || activeBirthyearFacets.length > 0">
                    <h4 class="filters__applied-title">Current Filters:</h4>
                    <div class="filter"*ngFor="let chosenFacet of activeGenderFacets">
                        <span class="filter__name">{{chosenFacet.value}}</span>
                        <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearGenderFacet(chosenFacet.ID, chosenFacet.value)">
                            <title>
                                Remove filter from being applied
                            </title>
                            <path d="M0 0h12.444v14H0V0zm3.457 10.825h1.36L5.68 9.1c.177-.38.343-.75.53-1.198h.045c.222.448.4.817.587 1.198l.885 1.725h1.427l-2.058-3.72L9.02 3.5H7.66l-.763 1.624c-.166.336-.31.683-.487 1.12h-.044c-.22-.437-.376-.784-.553-1.12L5.016 3.5H3.59l1.924 3.55-2.057 3.775z" fill="#704b2b" fill-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="filter"*ngFor="let chosenFacet of activeJobFacets">
                        <span class="filter__name">{{chosenFacet.value}}</span>
                        <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearJobFacet(chosenFacet.ID)">
                            <title>
                                Remove filter from being applied
                            </title>
                            <path d="M0 0h12.444v14H0V0zm3.457 10.825h1.36L5.68 9.1c.177-.38.343-.75.53-1.198h.045c.222.448.4.817.587 1.198l.885 1.725h1.427l-2.058-3.72L9.02 3.5H7.66l-.763 1.624c-.166.336-.31.683-.487 1.12h-.044c-.22-.437-.376-.784-.553-1.12L5.016 3.5H3.59l1.924 3.55-2.057 3.775z" fill="#704b2b" fill-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="filter" *ngFor="let chosenFacet of activeBirthyearFacets">
                        <span class="filter__name">{{chosenFacet.value}}</span>
                        <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearBirthyearFacet(chosenFacet.ID)">
                            <title>
                                Remove filter from being applied
                            </title>
                            <path d="M0 0h12.444v14H0V0zm3.457 10.825h1.36L5.68 9.1c.177-.38.343-.75.53-1.198h.045c.222.448.4.817.587 1.198l.885 1.725h1.427l-2.058-3.72L9.02 3.5H7.66l-.763 1.624c-.166.336-.31.683-.487 1.12h-.044c-.22-.437-.376-.784-.553-1.12L5.016 3.5H3.59l1.924 3.55-2.057 3.775z" fill="#704b2b" fill-rule="evenodd"/>
                        </svg>
                    </div>
                </div>

                <section class="filters__section">
                    <h4 class="filters__section-title">Refine Results</h4>

                    <div class="panel panel-default panel--first">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapse2">
                                    <span>Gender </span>
                                    <span class="caret"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse2" class="panel-collapse collapse">
                            <div class="panel-body panel-tight-text-vertically">
                                <p class="filter" *ngFor="let gender of genderFacets">
                                    <span class="actionAsSpanText filter__name" [class.active]="gender.active" (click)="chooseGenderFacet(gender.ID, gender.value); activeFacet(gender)">{{gender.value}}&nbsp;({{gender.count}})</span>
                                    <svg width="12px" height="11px" viewBox="0 0 12 11" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearGenderFacet(gender.ID, gender.value)" *ngIf="gender.active">
                                        <title>
                                            Checkmark
                                        </title>
                                        <path d="M2.115 3.986l2.052 2.065L9.887 0 12 2.115l-7.823 8.172L0 6.101" fill="#704b2b" fill-rule="evenodd"/>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapse3">
                                    <span>Decade of Birth</span> <span class="caret"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse3" class="panel-collapse collapse">
                            <div class="panel-body panel-tight-text-vertically">
                                <p class="filter" *ngFor="let birthyear of birthyearFacets">
                                    <span class="actionAsSpanText filter__name" [class.active]="birthyear.active" (click)="chooseBirthyearFacet(birthyear.ID, birthyear.value); activeFacet(birthyear)">{{birthyear.value}}&nbsp;({{birthyear.count}})</span>
                                    <svg width="12px" height="11px" viewBox="0 0 12 11" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearBirthyearFacet(birthyear.ID)" *ngIf="birthyear.active">
                                        <title>
                                            Checkmark
                                        </title>
                                        <path d="M2.115 3.986l2.052 2.065L9.887 0 12 2.115l-7.823 8.172L0 6.101" fill="#704b2b" fill-rule="evenodd"/>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapse4">
                                    <span>Job Type</span> <span class="caret"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse4" class="panel-collapse collapse">
                            <div class="panel-body panel-tight-text-vertically">
                                <p class="filter" *ngFor="let occupation of jobTypeFacets">
                                    <span class="actionAsSpanText filter__name" [class.active]="occupation.active" (click)="chooseJobFacet(occupation.ID, occupation.value); activeFacet(occupation)">{{occupation.value}}&nbsp;({{occupation.count}})</span>
                                    <svg width="12px" height="11px" viewBox="0 0 12 11" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearJobFacet(occupation.ID)" *ngIf="occupation.active">
                                        <title>
                                            Checkmark
                                        </title>
                                        <path d="M2.115 3.986l2.052 2.065L9.887 0 12 2.115l-7.823 8.172L0 6.101" fill="#704b2b" fill-rule="evenodd"/>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>

                </section>

            </div>

        </section>

        <!-- Search section -->
        <section class="search col-xs-12 col-sm-8 col-md-8 col-lg-6 col-lg-offset-1 col-md-offset-1">
             <story-search [dropdown]="false"></story-search>
        </section>
    </div>

    <div class="row">
        <div class="visible-lg-block col-lg-3 visible-md-block col-md-3 visible-sm-block col-sm-4 visible-xs-block col-xs-12">

            <!-- Results filters section -->
            <section class="filters" *ngIf="pages.length >= 1">
                <h3 class="filters__title">Filter Results</h3>
                <div class="filters__applied" *ngIf="activeJobFacets.length > 0 || activeGenderFacets.length > 0 || activeBirthyearFacets.length > 0">
                    <h4 class="filters__applied-title">Current Filters:</h4>
                    <div class="filter"*ngFor="let chosenFacet of activeGenderFacets">
                        <span class="filter__name">{{chosenFacet.value}}</span>
                        <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearGenderFacet(chosenFacet.ID, chosenFacet.value)">
                            <title>
                                Remove filter from being applied
                            </title>
                            <path d="M0 0h12.444v14H0V0zm3.457 10.825h1.36L5.68 9.1c.177-.38.343-.75.53-1.198h.045c.222.448.4.817.587 1.198l.885 1.725h1.427l-2.058-3.72L9.02 3.5H7.66l-.763 1.624c-.166.336-.31.683-.487 1.12h-.044c-.22-.437-.376-.784-.553-1.12L5.016 3.5H3.59l1.924 3.55-2.057 3.775z" fill="#704b2b" fill-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="filter"*ngFor="let chosenFacet of activeJobFacets">
                        <span class="filter__name">{{chosenFacet.value}}</span>
                        <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearJobFacet(chosenFacet.ID)">
                            <title>
                                Remove filter from being applied
                            </title>
                            <path d="M0 0h12.444v14H0V0zm3.457 10.825h1.36L5.68 9.1c.177-.38.343-.75.53-1.198h.045c.222.448.4.817.587 1.198l.885 1.725h1.427l-2.058-3.72L9.02 3.5H7.66l-.763 1.624c-.166.336-.31.683-.487 1.12h-.044c-.22-.437-.376-.784-.553-1.12L5.016 3.5H3.59l1.924 3.55-2.057 3.775z" fill="#704b2b" fill-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="filter" *ngFor="let chosenFacet of activeBirthyearFacets">
                        <span class="filter__name">{{chosenFacet.value}}</span>
                        <svg width="13" height="14" viewBox="0 0 13 14" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearBirthyearFacet(chosenFacet.ID)">
                            <title>
                                Remove filter from being applied
                            </title>
                            <path d="M0 0h12.444v14H0V0zm3.457 10.825h1.36L5.68 9.1c.177-.38.343-.75.53-1.198h.045c.222.448.4.817.587 1.198l.885 1.725h1.427l-2.058-3.72L9.02 3.5H7.66l-.763 1.624c-.166.336-.31.683-.487 1.12h-.044c-.22-.437-.376-.784-.553-1.12L5.016 3.5H3.59l1.924 3.55-2.057 3.775z" fill="#704b2b" fill-rule="evenodd"/>
                        </svg>
                    </div>
                </div>
                <div class="visible-lg-block visible-md-block visible-sm-block">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#gender" class="collapsed">
                                    <span>Gender </span>
                                    <span class="caret"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="gender" class="panel-collapse collapse">
                            <div class="panel-body panel-tight-text-vertically">
                                <p class="filter" *ngFor="let gender of genderFacets">
                                    <span class="filter__name" [class.active]="gender.active" (click)="chooseGenderFacet(gender.ID, gender.value); activeFacet(gender)">{{gender.value}}&nbsp;({{gender.count}})</span>
                                    <svg width="12px" height="11px" viewBox="0 0 12 11" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearGenderFacet(gender.ID, gender.value)" *ngIf="gender.active">
                                        <title>
                                            Checkmark
                                        </title>
                                        <path d="M2.115 3.986l2.052 2.065L9.887 0 12 2.115l-7.823 8.172L0 6.101" fill="#704b2b" fill-rule="evenodd"/>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#birthyear" class="collapsed">
                                    <span>Decade of Birth</span> <span class="caret"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="birthyear" class="panel-collapse collapse">
                            <div class="panel-body panel-tight-text-vertically">
                                <p class="filter" *ngFor="let birthyear of birthyearFacets">
                                    <span class="filter__name" [class.active]="birthyear.active" (click)="chooseBirthyearFacet(birthyear.ID, birthyear.value); activeFacet(birthyear)">{{birthyear.value}}&nbsp;({{birthyear.count}})</span>
                                    <svg width="12px" height="11px" viewBox="0 0 12 11" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearBirthyearFacet(birthyear.ID)" *ngIf="birthyear.active">
                                        <title>
                                            Checkmark
                                        </title>
                                        <path d="M2.115 3.986l2.052 2.065L9.887 0 12 2.115l-7.823 8.172L0 6.101" fill="#704b2b" fill-rule="evenodd"/>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#job-type" class="collapsed">
                                    <span>Job Type</span> <span class="caret"></span>
                                </a>
                            </h4>
                        </div>
                        <div id="job-type" class="panel-collapse collapse">
                            <div class="panel-body panel-tight-text-vertically">
                                <p class="filter" *ngFor="let occupation of jobTypeFacets">
                                    <span class="filter__name" [class.active]="occupation.active" (click)="chooseJobFacet(occupation.ID, occupation.value); activeFacet(occupation)">{{occupation.value}}&nbsp;({{occupation.count}})</span>
                                    <svg width="12px" height="11px" viewBox="0 0 12 11" xmlns="http://www.w3.org/2000/svg" class="filter__check" (click)="clearJobFacet(occupation.ID)" *ngIf="occupation.active">
                                        <title>
                                            Checkmark
                                        </title>
                                        <path d="M2.115 3.986l2.052 2.065L9.887 0 12 2.115l-7.823 8.172L0 6.101" fill="#704b2b" fill-rule="evenodd"/>
                                    </svg>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- My Playlist-->
            <playlist [allowMyPlaylistView]=!showingStarredSet></playlist>
        </div>
        <div class="col-xs-12 col-sm-8 col-md-9 col-lg-9">
            <div class="story-set__title" *ngIf="IDListTitle && !showingStarredSet">{{IDListTitle}}</div>
            <h3 *ngIf="!showingStarredSet" class="story-set__title">{{titleForStorySet}}</h3>
            <h3 *ngIf="showingStarredSet && (activeJobFacets.length <= 0 && activeGenderFacets.length <= 0 && activeBirthyearFacets.length <= 0)" class="story-set__title" aria-hidden="true" [ngPlural]="playlist.length">
                <ng-template ngPluralCase="=0">There are no stories in my playlist</ng-template>
                <ng-template ngPluralCase="=1">{{playlist.length}} story in my playlist</ng-template>
                <ng-template ngPluralCase="other">{{playlist.length}} stories in my playlist</ng-template>
            </h3>
            <h3 *ngIf="showingStarredSet && (activeJobFacets.length > 0 || activeGenderFacets.length > 0 || activeBirthyearFacets.length > 0)" class="story-set__title" aria-hidden="true" [ngPlural]="filteredPlaylistLength">
                <ng-template ngPluralCase="=0">{{filteredPlaylistLength}} filtered stories from my playlist</ng-template>
                <ng-template ngPluralCase="=1">{{filteredPlaylistLength}} filtered story from my playlist</ng-template>
                <ng-template ngPluralCase="other">{{filteredPlaylistLength}} filtered stories from my playlist</ng-template>
            </h3>
            <div class="story-set__url-container" *ngIf="showingStarredSet">
                <a class="story-set__copy-link" href="#playlistModal" data-toggle="modal" data-target="#playlistModal">
                    <span>Title my playlist to save/share...
                        <svg width="21" height="20" viewBox="0 0 21 20" xmlns="http://www.w3.org/2000/svg">
                            <title>
                                link
                            </title>
                            <path d="M14.76 0c-.454.025-.907.075-1.335.226-.68.252-1.333.63-1.887 1.182-.436.276-.66.79-.562 1.297.096.507.493.903 1 1 .507.096 1.022-.127 1.298-.562.277-.277.604-.428.957-.553.88-.302 1.963-.176 2.668.553.98.98.98 2.615 0 3.62l-3.775 3.772c-1.107 1.106-2.013 1.207-2.667 1.18-.654-.024-1.032-.325-1.032-.325-.395-.225-.88-.222-1.273.008-.392.23-.632.652-.628 1.107.003.454.248.873.644 1.097 0 0 .856.553 2.114.63 1.258.074 3.02-.404 4.555-1.962l3.774-3.772c1.962-1.96 1.962-5.13 0-7.065C17.904.73 17.073.303 16.167.1c-.453-.1-.956-.1-1.41-.075V0zM9.725 5.808c-1.258-.05-2.994.377-4.48 1.886l-3.774 3.77c-1.963 1.962-1.963 5.13 0 7.066 1.41 1.408 3.423 1.81 5.184 1.182.68-.252 1.334-.63 1.887-1.182.436-.276.66-.79.563-1.297-.097-.507-.494-.903-1-1-.508-.096-1.023.127-1.3.562-.276.277-.603.428-.955.553-.88.302-1.962.176-2.667-.553-.98-.98-.98-2.615 0-3.62l3.775-3.772c1.007-1.005 1.887-1.13 2.592-1.106.705.025 1.183.226 1.183.226.403.302.947.335 1.384.083.436-.25.68-.74.62-1.24-.06-.5-.413-.914-.897-1.055 0 0-.856-.502-2.114-.552v.05z" fill-rule="nonzero" fill="#333"/>
                        </svg>
                    </span>
                </a>
            </div>
            <div class="addBottomMargin page-view-options">
                <!-- Pagination -->
                <div class="pagination" *ngIf="pages.length > 1">
                    <button class="pagination__prev" (click)="goBackPage()" [disabled]="myCurrentPage === 1"><span class="" aria-hidden="true">«</span></button>
                    <button class="pagination__button"
                            (click)="goToPage(page)"
                            *ngFor="let page of pages"
                            [class.active]="myCurrentPage === page"
                            [class.pagination__button--mobile-hidden]="page >= pages[6]">{{page}}</button>
                    <button class="pagination__next" (click)="goFwdPage()" [disabled]="myCurrentPage === pages.length"><span aria-hidden="true">»</span></button>
                </div>

                <div class="page-view-options__sort-and-display">

                    <!-- Sort results -->
                    <div *ngIf="myCurrentStorySearchSorting >= 0 && pages.length > 1" class="sort-results">
                        <label for="sort-results">Sort Results</label>
                        <div class="dropdown search__res-per-pg" id="sort-results">
                            <button class="search__res-per-pg-button dropdown-toggle" type="button" id="desktop-sortStorySearch" data-toggle="dropdown">
                                {{storySearchSortFields[myCurrentStorySearchSorting].value}}
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="desktop-sortStorySearch">
                                <li *ngFor="let oneStorySearchField of storySearchSortFields" role="presentation">
                                    <button class="dropdown__option" role="menuitem" (click)="setStorySearchSortingAndDoTheSort(oneStorySearchField.id)">{{oneStorySearchField.value}}</button>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Stamp view and page view buttons-->
                    <div class="view">
                        <div class="view__button-container">
                            <button class="view__grid-button" (click)="cardView = true" [class.active]="cardView">
                                <svg class="" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
                                    <title>
                                        Grid icon
                                    </title>
                                    <path class="grid" d="M10 1v8c0 .28-.096667.516667-.289333.71C9.516667 9.903333 9.28 10 9 10H1c-.28 0-.516667-.096667-.71-.29C.096667 9.516667 0 9.28 0 9V1C0 .72.096667.483333.29.29.483333.097333.72 0 1 0h8c.28 0 .516667.097333.710667.29C9.903333.483333 10 .72 10 1c0 0 0-.28 0 0zm0 12v8c0 .28-.096667.516667-.289333.71C9.516667 21.903333 9.28 22 9 22H1c-.28 0-.516667-.096667-.71-.29C.096667 21.516667 0 21.28 0 21v-8c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h8c.28 0 .516667.097333.710667.29.192666.193333.289333.43.289333.71 0 0 0-.28 0 0zM22 1v8c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29h-8c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71V1c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h8c.28 0 .516667.097333.710667.29C21.903333.483333 22 .72 22 1c0 0 0-.28 0 0zm0 12v8c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29h-8c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71v-8c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h8c.28 0 .516667.097333.710667.29.192666.193333.289333.43.289333.71z" fill="currentColor" fill-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>

                        <div class="view__button-container">
                            <button class="view__list-button" (click)="cardView = false" [class.active]="!cardView">
                                <svg class="" viewBox="0 0 24 22" xmlns="http://www.w3.org/2000/svg">
                                    <title>
                                        List icon
                                    </title>
                                    <path class="list" d="M6 1v4c0 .28-.096667.516667-.289333.71C5.516667 5.903333 5.28 6 5 6H1c-.28 0-.516667-.096667-.71-.29C.096667 5.516667 0 5.28 0 5V1C0 .72.096667.483333.29.29.483333.097333.72 0 1 0h4c.28 0 .516667.097333.710667.29C5.903333.483333 6 .72 6 1c0 0 0-.28 0 0zm0 12V9c0-.28-.096667-.516667-.289333-.71C5.516667 8.097333 5.28 8 5 8H1c-.28 0-.516667.097333-.71.29C.096667 8.483333 0 8.72 0 9v4c0 .28.096667.516667.29.71.193333.193333.43.29.71.29h4c.28 0 .516667-.096667.710667-.29C5.903333 13.516667 6 13.28 6 13c0 0 0 .28 0 0zm0 4v4c0 .28-.096667.516667-.289333.71C5.516667 21.903333 5.28 22 5 22H1c-.28 0-.516667-.096667-.71-.29C.096667 21.516667 0 21.28 0 21v-4c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h4c.28 0 .516667.097333.710667.29C5.903333 16.483333 6 16.72 6 17c0 0 0-.28 0 0zM24 1v4c0 .28-.096667.516667-.289333.71C23.516667 5.903333 23.28 6 23 6H9c-.28 0-.516667-.096667-.71-.29C8.096667 5.516667 8 5.28 8 5V1c0-.28.096667-.516667.29-.71C8.483333.097333 8.72 0 9 0h14c.28 0 .516667.097333.710667.29C23.903333.483333 24 .72 24 1c0 0 0-.28 0 0zm0 8v4c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29H9c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71V9c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h14c.28 0 .516667.097333.710667.29C23.903333 8.483333 24 8.72 24 9c0 0 0-.28 0 0zm0 8v4c0 .28-.096667.516667-.289333.71-.194.193333-.430667.29-.710667.29H9c-.28 0-.516667-.096667-.71-.29-.193333-.193333-.29-.43-.29-.71v-4c0-.28.096667-.516667.29-.71.193333-.192667.43-.29.71-.29h14c.28 0 .516667.097333.710667.29.192666.193333.289333.43.289333.71z" fill="currentColor" fill-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- People per page for current results -->
                    <div class="dropdown search__res-per-pg" *ngIf="pages.length > 1">
                        <button class="search__res-per-pg-button dropdown-toggle" type="button" id="desktop-pgSizeEntryEnd" data-toggle="dropdown">
                            Stories per Page: {{myCurrentPageSize}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="desktop-pgSizeEntryEnd">
                            <li role="presentation"><button class="dropdown__option" role="menuitem" (click)="setPageSize(10)">10</button></li>
                            <li role="presentation"><button class="dropdown__option" role="menuitem" (click)="setPageSize(30)">30</button></li>
                            <li role="presentation"><button class="dropdown__option" role="menuitem" (click)="setPageSize(60)">60</button></li>
                            <li role="presentation"><button class="dropdown__option" role="menuitem" (click)="setPageSize(100)">100</button></li>
                            <li role="presentation"><button class="dropdown__option" role="menuitem" (click)="setPageSize(300)">300</button></li>
                        </ul>
                    </div>

                </div>
            </div>
            <ul class="tapes list-without-styles" [class.tapes--list]="!cardView" [dragula]='"tapesTarget"' [dragulaModel]="playlist">
                <li class="tape" *ngFor="let oneStory of myStoryList;let i=index" [class.tape--list]="!cardView" [class.ignore-item]="!showingStarredSet">
                    <thda-story (storyForPlaylist)="toggleAddToPlaylist($event)"
                                [cardView]="cardView"
                                [story]="myStoryList[i].document"
                                [highlights]="myStoryList[i].highlights"
                                [selectedID]="selectedStoryID"
                                (onSelected)="onSelected($event)"
                                [isStarredSetItem]="showingStarredSet"
                                (hideParent)="myStoryList.splice(i, 1)">
                    </thda-story>
                </li>
            </ul>
            <!-- Pagination -->
            <div class="pagination" *ngIf="pages.length > 1">
                <button class="pagination__prev" (click)="goBackPage()" [disabled]="myCurrentPage === 1"><span class="" aria-hidden="true">«</span></button>
                <button class="pagination__button"
                        (click)="goToPage(page)"
                        *ngFor="let page of pages"
                        [class.active]="myCurrentPage === page"
                        [class.pagination__button--mobile-hidden]="page >= pages[6]">{{page}}</button>
                <button class="pagination__next" (click)="goFwdPage()" [disabled]="myCurrentPage === pages.length"><span aria-hidden="true">»</span></button>
            </div>
        </div>
    </div>
</main>
<button class="apply-filters" [class.apply-filters--show]="mobileFiltersOpen" aria-hidden="true" (click)="toggleMobileFilters()">
    <svg class="filters__button-icon" width="24px" height="27px" viewBox="0 0 24 27" xmlns="http://www.w3.org/2000/svg">
        <title>
            Icon for Filter Button
        </title>
        <g fill-rule="nonzero" fill="#FFF">
            <path d="M22.336422 12.623774h-1.868784c-.474612-1.956227-2.254407-3.453963-4.30117-3.453963-2.046764 0-3.796895 1.46717-4.30117 3.453964H1.09754C.474612 12.623774 0 13.11283 0 13.754717c0 .641887.474612 1.130943 1.09754 1.130943h10.79742c.474613 1.956227 2.254407 3.453963 4.271508 3.453963 2.0171 0 3.796895-1.46717 4.30117-3.453963h1.868784c.622928 0 1.09754-.489056 1.09754-1.130943 0-.641887-.504275-1.130943-1.09754-1.130943zm-6.169954 3.85132c-1.4535 0-2.64003-1.22264-2.64003-2.720377 0-1.497736 1.18653-2.720377 2.64003-2.720377 1.4535 0 2.640028 1.22264 2.640028 2.720377 0 1.497736-1.156866 2.720377-2.640028 2.720377zM1.096152 5.71585h1.9553c.47401 1.956225 2.251556 3.45396 4.295732 3.45396s3.792095-1.467168 4.295733-3.45396H22.33781c.62214 0 1.096152-.489058 1.096152-1.130944 0-.641887-.474012-1.130944-1.096152-1.130944H11.61329C11.13928 1.497736 9.361736 0 7.31756 0 5.273382 0 3.525463 1.436604 3.05145 3.453962H1.096153C.474012 3.453962 0 3.94302 0 4.584906 0 5.226792.503638 5.71585 1.096152 5.71585zm6.221406-3.851322c1.451662 0 2.63669 1.222642 2.63669 2.720378 0 1.497736-1.185028 2.720377-2.63669 2.720377-1.45166 0-2.63669-1.22264-2.63669-2.720377 0-1.497736 1.18503-2.720378 2.63669-2.720378zM22.33781 21.28415H11.642917c-.474012-1.956225-2.251557-3.45396-4.295733-3.45396S3.55509 19.297357 3.05145 21.28415H1.096153C.474012 21.28415 0 21.77321 0 22.415095c0 .641887.474012 1.130944 1.096152 1.130944h1.9553C3.52546 25.502264 5.303007 27 7.347183 27s3.792095-1.46717 4.295733-3.453962H22.33781c.62214 0 1.096152-.489057 1.096152-1.130944 0-.641886-.503637-1.130943-1.096152-1.130943zM7.347184 25.135473c-1.45166 0-2.63669-1.222642-2.63669-2.720378 0-1.497736 1.18503-2.720377 2.63669-2.720377 1.451662 0 2.63669 1.22264 2.63669 2.720377 0 1.497736-1.155403 2.720378-2.63669 2.720378z"/>
        </g>
    </svg>
    Apply Filters
</button>
